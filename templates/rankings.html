<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Donor Rankings - PCS</title>
	<style>
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}
		body {
			font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
			background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
			min-height: 100vh;
			padding: 20px;
		}
		.container {
			max-width: 1400px;
			margin: 0 auto;
		}
		.header {
			background: white;
			padding: 20px 30px;
			border-radius: 15px;
			box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
			margin-bottom: 30px;
			display: flex;
			justify-content: space-between;
			align-items: center;
		}
		.header h1 {
			color: #667eea;
			font-size: 28px;
		}
		.nav-links {
			display: flex;
			gap: 15px;
		}
		.nav-links a {
			padding: 10px 20px;
			background: #667eea;
			color: white;
			text-decoration: none;
			border-radius: 8px;
			transition: background 0.3s;
		}
		.nav-links a:hover {
			background: #764ba2;
		}
		.rankings-grid {
			display: grid;
			grid-template-columns: 1fr 1fr;
			gap: 30px;
			margin-top: 20px;
		}
		@media (max-width: 1200px) {
			.rankings-grid {
				grid-template-columns: 1fr;
			}
		}
		.ranking-section {
			background: white;
			padding: 25px;
			border-radius: 15px;
			box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
		}
		.section-header {
			display: flex;
			justify-content: space-between;
			align-items: center;
			margin-bottom: 20px;
			padding-bottom: 15px;
			border-bottom: 2px solid #667eea;
		}
		.section-header h2 {
			color: #667eea;
			font-size: 24px;
		}
		.country-selector {
			padding: 8px 15px;
			border: 2px solid #667eea;
			border-radius: 8px;
			background: white;
			color: #667eea;
			font-size: 14px;
			cursor: pointer;
			transition: all 0.3s;
		}
		.country-selector:hover {
			background: #667eea;
			color: white;
		}
		.ranking-list {
			list-style: none;
		}
		.ranking-item {
			display: flex;
			align-items: center;
			padding: 15px;
			margin-bottom: 10px;
			background: #f8f9fa;
			border-radius: 10px;
			transition: transform 0.2s, box-shadow 0.2s;
		}
		.ranking-item:hover {
			transform: translateY(-2px);
			box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
		}
		.rank-number {
			font-size: 24px;
			font-weight: bold;
			color: #667eea;
			min-width: 50px;
			text-align: center;
		}
		.rank-medal {
			font-size: 30px;
			min-width: 50px;
			text-align: center;
		}
		.donor-info {
			flex: 1;
			margin-left: 15px;
		}
		.donor-name {
			font-size: 18px;
			font-weight: 600;
			color: #333;
			margin-bottom: 5px;
		}
		.donor-country {
			font-size: 14px;
			color: #666;
		}
		.donation-amount {
			font-size: 20px;
			font-weight: bold;
			color: #28a745;
			text-align: right;
			min-width: 120px;
		}
		.empty-state {
			text-align: center;
			padding: 40px;
			color: #999;
		}
		.empty-state svg {
			width: 80px;
			height: 80px;
			margin-bottom: 20px;
			opacity: 0.3;
		}
		.tab-buttons {
			display: flex;
			gap: 10px;
			margin-bottom: 20px;
		}
		.tab-button {
			padding: 10px 20px;
			background: #f8f9fa;
			border: 2px solid #667eea;
			color: #667eea;
			border-radius: 8px;
			cursor: pointer;
			transition: all 0.3s;
			font-size: 16px;
			font-weight: 600;
		}
		.tab-button:hover, .tab-button.active {
			background: #667eea;
			color: white;
		}
		.single-column {
			grid-column: 1 / -1;
		}
	</style>
</head>
<body>
	<div class="container">
		<div class="header">
			<h1>üèÜ Donor Rankings</h1>
			<div class="nav-links">
				{% if unread_count > 0 %}
				<a href="/notifications">üîî Notifications ({{ unread_count }})</a>
				{% endif %}
				<a href="/profile">My Profile</a>
				<a href="/search">Search</a>
			</div>
		</div>

		<div class="tab-buttons">
			<button class="tab-button active" onclick="showView('split')">Country & Worldwide</button>
			<button class="tab-button" onclick="showView('worldwide')">Worldwide Only</button>
			<button class="tab-button" onclick="showView('country')">By Country Only</button>
		</div>

		<!-- Split View (Default) -->
		<div id="split-view" class="rankings-grid">
			<!-- Country Rankings -->
			<div class="ranking-section">
				<div class="section-header">
					<h2>üåç Top Donors by Country</h2>
					<select class="country-selector" onchange="window.location.href='/rankings?country='+this.value">
						{% for country in countries %}
						<option value="{{ country }}" {% if country == selected_country %}selected{% endif %}>{{ country }}</option>
						{% endfor %}
					</select>
				</div>
				<ul class="ranking-list">
					{% if country_rankings %}
						{% for donor in country_rankings[:50] %}
						<li class="ranking-item">
							{% if donor.rank == 1 %}
							<div class="rank-medal">ü•á</div>
							{% elif donor.rank == 2 %}
							<div class="rank-medal">ü•à</div>
							{% elif donor.rank == 3 %}
							<div class="rank-medal">ü•â</div>
							{% else %}
							<div class="rank-number">#{{ donor.rank }}</div>
							{% endif %}
							<div class="donor-info">
								{% if donor.is_public %}
								<div class="donor-name">
									<a href="/user/{{ donor.user_id }}" style="color: inherit; text-decoration: none;">{{ donor.username }}</a>
								</div>
								{% else %}
								<div class="donor-name">{{ donor.username }} üîí</div>
								{% endif %}
								<div class="donor-country">{{ donor.country }}</div>
							</div>
							<div class="donation-amount">{{ "%.2f"|format(donor.total_donated) }} PCS</div>
						</li>
						{% endfor %}
					{% else %}
					<div class="empty-state">
						<p>No donors found in this country yet.</p>
					</div>
					{% endif %}
				</ul>
			</div>

			<!-- Worldwide Rankings -->
			<div class="ranking-section">
				<div class="section-header">
					<h2>üåê Top Donors Worldwide</h2>
				</div>
				<ul class="ranking-list">
					{% if worldwide_rankings %}
						{% for donor in worldwide_rankings[:100] %}
						<li class="ranking-item">
							{% if donor.rank == 1 %}
							<div class="rank-medal">ü•á</div>
							{% elif donor.rank == 2 %}
							<div class="rank-medal">ü•à</div>
							{% elif donor.rank == 3 %}
							<div class="rank-medal">ü•â</div>
							{% else %}
							<div class="rank-number">#{{ donor.rank }}</div>
							{% endif %}
							<div class="donor-info">
								{% if donor.is_public %}
								<div class="donor-name">
									<a href="/user/{{ donor.user_id }}" style="color: inherit; text-decoration: none;">{{ donor.username }}</a>
								</div>
								{% else %}
								<div class="donor-name">{{ donor.username }} üîí</div>
								{% endif %}
								<div class="donor-country">{{ donor.country }}</div>
							</div>
							<div class="donation-amount">{{ "%.2f"|format(donor.total_donated) }} PCS</div>
						</li>
						{% endfor %}
					{% else %}
					<div class="empty-state">
						<p>No donations recorded yet.</p>
					</div>
					{% endif %}
				</ul>
			</div>
		</div>

		<!-- Worldwide Only View -->
		<div id="worldwide-view" class="rankings-grid" style="display: none;">
			<div class="ranking-section single-column">
				<div class="section-header">
					<h2>üåê Top Donors Worldwide</h2>
				</div>
				<ul class="ranking-list">
					{% if worldwide_rankings %}
						{% for donor in worldwide_rankings[:100] %}
						<li class="ranking-item">
							{% if donor.rank == 1 %}
							<div class="rank-medal">ü•á</div>
							{% elif donor.rank == 2 %}
							<div class="rank-medal">ü•à</div>
							{% elif donor.rank == 3 %}
							<div class="rank-medal">ü•â</div>
							{% else %}
							<div class="rank-number">#{{ donor.rank }}</div>
							{% endif %}
							<div class="donor-info">
								{% if donor.is_public %}
								<div class="donor-name">
									<a href="/user/{{ donor.user_id }}" style="color: inherit; text-decoration: none;">{{ donor.username }}</a>
								</div>
								{% else %}
								<div class="donor-name">{{ donor.username }} üîí</div>
								{% endif %}
								<div class="donor-country">{{ donor.country }}</div>
							</div>
							<div class="donation-amount">{{ "%.2f"|format(donor.total_donated) }} PCS</div>
						</li>
						{% endfor %}
					{% else %}
					<div class="empty-state">
						<p>No donations recorded yet.</p>
					</div>
					{% endif %}
				</ul>
			</div>
		</div>

		<!-- Country Only View -->
		<div id="country-view" class="rankings-grid" style="display: none;">
			<div class="ranking-section single-column">
				<div class="section-header">
					<h2>üåç Top Donors by Country</h2>
					<select class="country-selector" onchange="window.location.href='/rankings?country='+this.value">
						{% for country in countries %}
						<option value="{{ country }}" {% if country == selected_country %}selected{% endif %}>{{ country }}</option>
						{% endfor %}
					</select>
				</div>
				<ul class="ranking-list">
					{% if country_rankings %}
						{% for donor in country_rankings[:50] %}
						<li class="ranking-item">
							{% if donor.rank == 1 %}
							<div class="rank-medal">ü•á</div>
							{% elif donor.rank == 2 %}
							<div class="rank-medal">ü•à</div>
							{% elif donor.rank == 3 %}
							<div class="rank-medal">ü•â</div>
							{% else %}
							<div class="rank-number">#{{ donor.rank }}</div>
							{% endif %}
							<div class="donor-info">
								{% if donor.is_public %}
								<div class="donor-name">
									<a href="/user/{{ donor.user_id }}" style="color: inherit; text-decoration: none;">{{ donor.username }}</a>
								</div>
								{% else %}
								<div class="donor-name">{{ donor.username }} üîí</div>
								{% endif %}
								<div class="donor-country">{{ donor.country }}</div>
							</div>
							<div class="donation-amount">{{ "%.2f"|format(donor.total_donated) }} PCS</div>
						</li>
						{% endfor %}
					{% else %}
					<div class="empty-state">
						<p>No donors found in this country yet.</p>
					</div>
					{% endif %}
				</ul>
			</div>
		</div>
	</div>

	<script>
		function showView(view) {
			// Hide all views
			document.getElementById('split-view').style.display = 'none';
			document.getElementById('worldwide-view').style.display = 'none';
			document.getElementById('country-view').style.display = 'none';
			
			// Remove active class from all buttons
			document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
			
			// Show selected view
			if (view === 'split') {
				document.getElementById('split-view').style.display = 'grid';
				document.querySelectorAll('.tab-button')[0].classList.add('active');
			} else if (view === 'worldwide') {
				document.getElementById('worldwide-view').style.display = 'grid';
				document.querySelectorAll('.tab-button')[1].classList.add('active');
			} else if (view === 'country') {
				document.getElementById('country-view').style.display = 'grid';
				document.querySelectorAll('.tab-button')[2].classList.add('active');
			}
		}
	</script>
</body>
</html>
