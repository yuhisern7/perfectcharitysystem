<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Search for Projects - PCS</title>
	<style>
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}
		body {
			font-family: Arial, sans-serif;
			background-color: #f4f4f9;
			color: #333;
			padding: 20px;
		}
		.container {
			max-width: 1200px;
			margin: 0 auto;
			background-color: white;
			padding: 30px;
			border-radius: 10px;
			box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
		}
		h1 {
			color: #2c3e50;
			margin-bottom: 30px;
			text-align: center;
		}
		.filter-form {
			background-color: #f8f9fa;
			padding: 20px;
			border-radius: 8px;
			margin-bottom: 30px;
		}
		.filter-form h2 {
			font-size: 18px;
			margin-bottom: 15px;
			color: #2c3e50;
		}
		.filter-row {
			display: flex;
			gap: 15px;
			flex-wrap: wrap;
			align-items: flex-end;
		}
		.filter-group {
			flex: 1;
			min-width: 200px;
		}
		.filter-group label {
			display: block;
			margin-bottom: 5px;
			font-weight: bold;
			color: #555;
		}
		.filter-group input {
			width: 100%;
			padding: 10px;
			border: 1px solid #ddd;
			border-radius: 5px;
			font-size: 14px;
		}
		.filter-group button {
			padding: 10px 20px;
			background-color: #3498db;
			color: white;
			border: none;
			border-radius: 5px;
			cursor: pointer;
			font-size: 14px;
			font-weight: bold;
		}
		.filter-group button:hover {
			background-color: #2980b9;
		}
		.clear-filters {
			padding: 10px 20px;
			background-color: #95a5a6;
			color: white;
			border: none;
			border-radius: 5px;
			cursor: pointer;
			font-size: 14px;
			text-decoration: none;
			display: inline-block;
		}
		.clear-filters:hover {
			background-color: #7f8c8d;
		}
		.projects-grid {
			display: grid;
			grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
			gap: 20px;
		}
		.project-card {
			background-color: #fff;
			border: 1px solid #e0e0e0;
			border-radius: 8px;
			padding: 20px;
			transition: transform 0.2s, box-shadow 0.2s;
		}
		.project-card:hover {
			transform: translateY(-2px);
			box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
		}
		.project-header {
			margin-bottom: 15px;
			padding-bottom: 15px;
			border-bottom: 2px solid #3498db;
		}
		.project-name {
			font-size: 20px;
			font-weight: bold;
			color: #2c3e50;
			margin-bottom: 5px;
		}
		.project-username {
			font-size: 14px;
			color: #7f8c8d;
		}
		.project-info {
			margin-bottom: 15px;
		}
		.project-info-row {
			display: flex;
			margin-bottom: 8px;
			font-size: 14px;
		}
		.info-label {
			font-weight: bold;
			color: #555;
			width: 80px;
		}
		.info-value {
			color: #333;
		}
		.role-badge {
			display: inline-block;
			padding: 3px 8px;
			border-radius: 3px;
			font-size: 12px;
			font-weight: bold;
			text-transform: uppercase;
		}
		.role-donor {
			background-color: #3498db;
			color: white;
		}
		.role-receiver {
			background-color: #2ecc71;
			color: white;
		}
		.role-charity_org {
			background-color: #e74c3c;
			color: white;
		}
		.role-inspector {
			background-color: #f39c12;
			color: white;
		}
		.view-project-btn {
			display: block;
			width: 100%;
			padding: 10px;
			background-color: #3498db;
			color: white;
			text-align: center;
			text-decoration: none;
			border-radius: 5px;
			font-weight: bold;
			transition: background-color 0.2s;
		}
		.view-project-btn:hover {
			background-color: #2980b9;
		}
		.no-results {
			text-align: center;
			padding: 40px;
			color: #7f8c8d;
			font-size: 18px;
		}
		.back-link {
			display: inline-block;
			margin-bottom: 20px;
			color: #3498db;
			text-decoration: none;
			font-weight: bold;
		}
		.back-link:hover {
			text-decoration: underline;
		}
		.results-count {
			margin-bottom: 20px;
			color: #555;
			font-size: 16px;
		}
		
		/* Mobile responsiveness */
		@media (max-width: 768px) {
			body { padding: 15px; }
			.container { padding: 20px; }
			h1 { font-size: 24px; }
			.filter-form { padding: 15px; }
			.filter-row { flex-direction: column; gap: 10px; }
			.filter-group { min-width: 100%; }
			.filter-group button, .clear-filters { width: 100%; }
			.projects-grid { grid-template-columns: 1fr; }
		}
		
		@media (max-width: 480px) {
			body { padding: 10px; }
			.container { padding: 15px; }
			h1 { font-size: 20px; }
			.filter-form h2 { font-size: 16px; }
			.project-card { padding: 15px; }
			.project-name { font-size: 18px; }
			.filter-group input { padding: 8px; font-size: 13px; }
			.filter-group button, .clear-filters { padding: 8px 15px; font-size: 13px; }
		}
	</style>
</head>
<body>
	<div class="container">
		<a href="/search" class="back-link">‚Üê Back to Search</a>
		
		<h1>Search for Projects</h1>
		
		<div class="filter-form">
			<h2>Filter Projects</h2>
			<form method="get" action="/projects">
				<div class="filter-row">
					<div class="filter-group">
						<label for="country">Country:</label>
						<input type="text" id="country" name="country" value="{{ country_filter }}" placeholder="Enter country">
					</div>
					<div class="filter-group">
						<label for="state">Location/State:</label>
						<input type="text" id="state" name="state" value="{{ state_filter }}" placeholder="Enter location">
					</div>
					<div class="filter-group">
						<label for="q">Project Name:</label>
						<input type="text" id="q" name="q" value="{{ query }}" placeholder="Search project name">
					</div>
					<div class="filter-group">
						<button type="submit">Apply Filters</button>
					</div>
					<div class="filter-group">
						<a href="/projects" class="clear-filters">Clear All</a>
					</div>
				</div>
			</form>
		</div>
		
		<p class="results-count">
			<strong>{{ projects|length }}</strong> project{% if projects|length != 1 %}s{% endif %} found
		</p>
		
		{% if projects %}
			<div class="projects-grid">
				{% for project in projects %}
					<div class="project-card">
						<div class="project-header">
							<div class="project-name">{{ project.project_name or "Untitled Project" }}</div>
							<div class="project-username">by @{{ project.username }}</div>
						</div>
						
						<div class="project-info">
							<div class="project-info-row">
								<span class="info-label">Role:</span>
								<span class="info-value">
									<span class="role-badge role-{{ project.role }}">{{ project.role.replace('_', ' ') }}</span>
								</span>
							</div>
							<div class="project-info-row">
								<span class="info-label">Country:</span>
								<span class="info-value">{{ project.country or "N/A" }}</span>
							</div>
							<div class="project-info-row">
								<span class="info-label">Location:</span>
								<span class="info-value">{{ project.state or "N/A" }}</span>
							</div>
						</div>
						
						<a href="/view-project/{{ project.user_id }}" class="view-project-btn">View Project Details</a>
					</div>
				{% endfor %}
			</div>
		{% else %}
			<div class="no-results">
				<p>No projects found matching your criteria.</p>
				<p style="margin-top: 10px; font-size: 14px;">Try adjusting your filters or <a href="/projects">view all projects</a>.</p>
			</div>
		{% endif %}
	</div>
</body>
</html>
